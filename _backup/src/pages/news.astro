---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import newsItems from '../data/news.yml';
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`News | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
		<style>
			main {
				width: 100%;
				max-width: 960px;
				margin: 0 auto;
				/* FIX 1: Changed top padding from 3em to 1em (or 0 if you want it tighter) */
				padding: 1em 1em 3em 1em; 
			}
			.news-list {
				list-style: none;
				padding: 0;
				margin: 0;
			}
			.news-item {
				display: flex;
				gap: 2rem;
				padding: 1.5rem 0;
				border-bottom: 1px solid rgb(var(--gray-light));
			}
			/* FIX 2: Remove top padding from the very first item */
			.news-item:first-child {
				padding-top: 0;
			}
			.news-item:last-child {
				border-bottom: none;
			}
			.news-date {
				flex: 0 0 100px;
				font-weight: bold;
				color: rgb(var(--gray));
				font-family: monospace;
				font-size: 1.1rem;
			}
			.news-content {
				flex: 1;
				display: flex;
				flex-direction: column;
			}
			.news-title {
				font-weight: bold;
				color: rgb(var(--black));
				margin-bottom: 0.25rem;
				display: block;
			}
			.news-desc {
				margin: 0;
				color: rgb(var(--gray-dark));
			}
			
			.news-links-row {
				margin-top: 0.5rem;
				font-size: 0.95rem;
			}
			.links-label {
				font-weight: bold;
				color: rgb(var(--gray-dark));
			}
			.news-link {
				color: var(--accent);
				text-decoration: none;
			}
			.news-link:hover {
				text-decoration: underline;
			}

			@media (max-width: 720px) {
				.news-item {
					flex-direction: column;
					gap: 0.5rem;
				}
				.news-date {
					flex: none;
					color: var(--accent);
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<ul class="news-list">
				{newsItems.map((item: any) => (
					<li class="news-item">
						<div class="news-date">{item.date}</div>
						<div class="news-content">
							<span class="news-title">{item.title}</span>
							
							{item.description && <p class="news-desc">{item.description}</p>}

							{item.links && item.links.length > 0 && (
								<div class="news-links-row">
									<span class="links-label">Links: </span>
									{item.links.map((link: any, index: number) => (
										<>
											<a href={link.url} target="_blank" class="news-link">
												{link.text}
											</a>
											{index < item.links.length - 1 && ", "}
										</>
									))}
								</div>
							)}
						</div>
					</li>
				))}
			</ul>
		</main>
		<Footer />
	</body>
</html>
